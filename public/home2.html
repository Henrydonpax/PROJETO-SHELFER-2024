<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--Link css-->
    <link rel="stylesheet" href="css/home2.css"><!--Fim-->

    <!--Fonte Google Bungee Shade-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee+Shade&family=Gruppo&display=swap" rel="stylesheet">
    <!--Fim-->

    <!--Google Fonts ROBOTO-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">

    <!--GOOGLE FONTS-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!---->

    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!---->

    <!--Chart.js-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



    <link rel="icon" href="../public/css/image-PhotoRoom (1).png" type="image/x-icon">

</head>

<body>

    <div class="container">



        <div class="menulateral" onmouseover="ExpandeMenu()" onmouseout="RetraiMenu()">
            <div class="menu">
                <span class="material-symbols-outlined">manage_accounts</span>
                <a href="menuussuarios.html">
                    <div class="txt">Usuários</div>
                </a>
            </div>

            <div class="menu">
                <span class="material-symbols-outlined">trolley</span>
                <a href="menuprodutos.html">
                    <div class="txt">Produtos</div>
                </a>
            </div>

            <div class="menu">
                <span class="material-symbols-outlined">inventory</span>
                <div class="txt">Relatórios</div>
            </div>

            <div class="menu">
                <span class="material-symbols-outlined">work</span>
                <div class="txt">Compras</div>
            </div>

            <div class="menu">
                <span class="material-symbols-outlined">shopping_bag</span>
                <div class="txt">Vendas</div>
            </div>

            <div class="menu">
                <span class="material-symbols-outlined">local_shipping</span>
                <a href="menufornecedores.html">
                    <div class="txt">Fornecedores</div>
                </a>
            </div>



        </div><!--menu lateral-->




        <div class="console">

            <div class="logo">
                <H1>SHELFER</H1>
            </div>


            <div class="user-icon">
                <a><span class="material-symbols-outlined">account_circle</span></a>
            </div>


        </div>


        <div class="central">

            <div class="search-bar">

                <div class="log">
                    <span class="material-symbols-outlined">shield_person</span>
                    <p>Bem vindo de volta, Administrator!</p>
                </div>

                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Pesquisar" aria-label="Search">
                    <button type="submit"><i class="bi bi-search"></i> </button>
                </form>



            </div>


            <div class="dashboard">
                <p>Dashboard</p>
            </div>



            <div class="central-grid">

                <a href="#">
                    <div class="box" id="quantidadeProdutosBox">
                        <p class="box-title">Quantidade de produtos em estoque</p>
                       <p id="quantidadeProdutos"></p>
                    </div>
                </a>


                <a href="#">
                    <div class="box" id="valorTotalItensBox">
                        <p class="box-title">Valor total do estoque</p>
                        <p id="valorTotalItens"></p>
                    </div>
                </a>

                <a href="#">
                    <div class="box"></div>
                </a>

                <a href="#">
                    <div class="box"></div>
                </a>
             
            </div>




            <div class="down-grid">

                <div class="box-canva">
                    <canvas id="myChart"></canvas>
                </div>

                <div class="box-canva2">
                    <canvas id="myRadarChart"></canvas>
                </div>

            </div>




        </div><!--central-->







    </div>

    </div>


</body>


<script>


function ExpandeMenu(){

var menulateral = document.querySelector(".menulateral")
menulateral.classList.add('expande');

}

function RetraiMenu(){

var menulateral = document.querySelector(".menulateral")
menulateral.classList.remove('expande');
}



    //boxes dashboard
    document.addEventListener('DOMContentLoaded', function () {
        // Chame a rota POST para obter as informações do sistema
        fetch('/home', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
        })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    preencherInformacoes(data.informacoes);
                } else {
                    console.error('Erro ao obter informações do sistema:', data.message);
                }
            })
            .catch(error => console.error('Erro ao obter informações do sistema:', error));
    });

    // Função para preencher os valores nos quadrados
    function preencherInformacoes(informacoes) {
        document.getElementById('quantidadeProdutos').innerText = `${informacoes.quantidadeProdutos} produtos`;
        document.getElementById('valorTotalItens').innerText = `R$ ${informacoes.valorTotalItens}`;
    }
    //



    //Grafico de linhas//
    const dadosPersonalizados = [
  { mes: 'Janeiro', total_vendas: 600 },
  { mes: 'Fevereiro', total_vendas: 500 },
  { mes: 'Março', total_vendas: 550 },
  { mes: 'Abril', total_vendas: 400 },
  { mes: 'Maio', total_vendas: 734 },
  { mes: 'Junho', total_vendas: 650 },
  { mes: 'Julho', total_vendas: 590 },
  { mes: 'Agosto', total_vendas: 430 },
  { mes: 'Setembro', total_vendas: 650 },
  { mes: 'Outubro', total_vendas: 459 },
  { mes: 'Novembro', total_vendas: 790 },
  { mes: 'Dezembro', total_vendas: 1100 },
];

const xValues = dadosPersonalizados.map(item => item.mes);
const yValues = dadosPersonalizados.map(item => item.total_vendas);

new Chart("myChart", {
  type: "line",
  data: {
    labels: xValues,
    datasets: [{
      fill: false,
      lineTension: 0,
      backgroundColor: "rgba(0,0,255,1.0)",
      borderColor: "rgba(0,0,255,0.1)",
      data: yValues,
    }]
  },
  options: {
        legend: {
            labels: {
                text: 'Total de Vendas por Mês' // Aqui você define o título da legenda
            },
            display: true
        },
        scales: {
            yAxes: [{ ticks: { min: 0, max: Math.max(...yValues) + 100 } }],
        }
    }
});

    //////////


    //Grafico de radar

    const radarData = {
        labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho'],
        datasets: [
            {
                label: 'Vendas semestrais por categorias',
                data: [10, 20, 30, 40, 50],
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255, 99, 132, 1)',
                borderWidth: 2,
                pointBackgroundColor: 'rgba(255, 99, 132, 1)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgba(255, 99, 132, 1)'
            },
        ]
    };


    const radarChart = new Chart(document.getElementById('myRadarChart'), {
        type: 'radar',
        data: radarData,
        options: {
            responsive: true,
            plugins: {
                title: {
                    display: true,
                    text: ''
                }
            }
        },
    });
    //


</script>

</html>